
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QTH Locator</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
<h1>QTH Locator</h1>
<p>≈Åadowanie lokalizacji...</p>
<script>
function toMaidenhead(lat, lon) {
  lat = lat + 90;
  lon = lon + 180;
  const A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  let a = A[Math.floor(lon/20)];
  let b = A[Math.floor(lat/10)];
  let c = Math.floor((lon % 20)/2);
  let d = Math.floor(lat % 10);
  let e = A[Math.floor((lon % 2)*12)];
  let f = A[Math.floor((lat % 1)*24)];
  return a+b+c+""+d+e+f;
}
navigator.geolocation.getCurrentPosition(pos=>{
  let qth = toMaidenhead(pos.coords.latitude, pos.coords.longitude);
  document.body.innerHTML += "<h2>"+qth+"</h2>";
});
</script>
</body>
</html>
